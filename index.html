<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>熊麻吉：陪你一起成長</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header class="app-header">
      <h1>熊麻吉：陪你一起成長</h1>
      <p>讓一隻小熊麻吉陪你一起讀書、運動、學新技能。</p>
    </header>

    <div class="main-layout">
      <!-- 🐻 熊熊 + 星星商店 -->
      <section class="bear-panel">
        <!-- 回家按鈕 -->
        <button class="home-btn"
          onclick="window.location.href='https://luckygbear-coder.github.io/HeroApp/index.html';">
          回家
        </button>

        <!-- 熊麻吉畫面 -->
        <div class="bear-visual mode-idle" id="bearVisual">
          <img id="bearImage" src="images/bear_idle1.png" alt="熊麻吉" />
        </div>

        <!-- 熊熊對話 -->
        <div class="bear-bubble" id="bearBubble">
          🐻 我是熊麻吉～今天想一起做什麼呢？
        </div>

        <!-- 熊熊名字列 -->
        <div class="bear-name-row">
          <span class="bear-name-label">熊熊名字：</span>
          <span id="bearNameLabel" class="bear-name-value">熊麻吉</span>
          <button id="editNameBtn" class="bear-name-edit-btn">改名字</button>
        </div>

        <!-- ⭐ 星星＆商店 -->
        <div class="star-shop-bar" onclick="openShop()">
          <div class="star-shop-left">
            <span class="star-icon">⭐</span>
            <span class="star-label">星星商店</span>
          </div>
          <div class="star-shop-right">
            <span class="star-count-label">目前星星：</span>
            <span id="starCount" class="star-count-value">0</span>
          </div>
        </div>
      </section>

      <!-- 📊 成長狀態 -->
      <section class="stats">
        <div class="stats-header">
          <h2>成長狀態</h2>
          <button id="openAllDiaryBtn" class="stats-diary-btn">成長日記</button>
        </div>

        <div class="level-row">
          <span>等級</span>
          <span id="levelText">Lv. 1</span>
        </div>

        <div class="stat-row">
          <span>閱讀 📖</span>
          <div class="stat-bar">
            <div id="readingBar" class="stat-fill"></div>
          </div>
          <span id="readingValue" class="stat-value">0 分鐘</span>
        </div>

        <div class="stat-row">
          <span>運動 💪</span>
          <div class="stat-bar">
            <div id="sportBar" class="stat-fill"></div>
          </div>
          <span id="sportValue" class="stat-value">0 分鐘</span>
        </div>

        <div class="stat-row">
          <span>技能 🎵</span>
          <div class="stat-bar">
            <div id="skillBar" class="stat-fill"></div>
          </div>
          <span id="skillValue" class="stat-value">0 分鐘</span>
        </div>

        <div class="stat-row">
          <span>休息 😴</span>
          <div class="stat-bar">
            <div id="sleepBar" class="stat-fill"></div>
          </div>
          <span id="sleepValue" class="stat-value">0 分鐘</span>
        </div>
      </section>

      <!-- ⏳ 任務／定時 -->
      <section class="timer">
        <div class="timer-header-row">
          <h2>今天要做什麼？</h2>
          <div class="timer-header-actions">
            <button id="openAlarmModalBtn" class="timer-alarm-btn">⏰ 鬧鐘</button>
            <button id="openScheduleBtn" class="timer-schedule-btn">⚙ 作息設定</button>
          </div>
        </div>

        <!-- 活動種類 + 睡覺 -->
        <div class="activity-buttons">
          <button class="activity-btn active" data-activity="reading">📖 看書</button>
          <button class="activity-btn" data-activity="sport">💪 運動</button>
          <button class="activity-btn" data-activity="skill">🎵 練技能</button>
          <button class="activity-btn" data-activity="sleep">😴 睡覺</button>
        </div>

        <!-- 可累加的時間設定 -->
        <h3>設定本次專注時間（可以累加調整）</h3>

        <div class="step-select-row">
          <span class="step-label">每次調整：</span>
          <div class="step-buttons">
            <button class="step-btn active" data-step="1">1 分</button>
            <button class="step-btn" data-step="5">5 分</button>
            <button class="step-btn" data-step="10">10 分</button>
            <button class="step-btn" data-step="30">30 分</button>
            <button class="step-btn" data-step="60">60 分</button>
          </div>
        </div>

        <div class="duration-control">
          <button id="minusBtn" class="round-btn">－</button>
          <div id="durationMinutes" class="duration-display">0 分鐘</div>
          <button id="plusBtn" class="round-btn">＋</button>
        </div>

        <!-- 定時器顯示 -->
        <div class="timer-display" id="timerDisplay">
          尚未開始
        </div>

        <div class="timer-progress">
          <div class="timer-progress-fill" id="timerProgressFill"></div>
        </div>

        <div class="timer-actions">
          <button class="primary-btn" id="startButton">開始陪伴</button>
          <button class="ghost-btn" id="cancelButton" disabled>結束 / 取消</button>
        </div>
      </section>
    </div>
  </div>

  <!-- 🎉 完成任務鼓勵 Modal -->
  <div id="completionModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card completion-card">
      <div class="completion-bear">🐻✨</div>
      <h3 id="completionTitle">太棒了！</h3>
      <p id="completionText">
        你完成了一段專注時間，今天的你又升級了一點點！
      </p>
      <p id="completionStarsText" class="completion-stars-text">
        本次專注「<span id="completionActivityLabel">看書</span>」
        共 <span id="completionMinutesLabel">0</span> 分鐘，
        得到 <span id="completionStarsLabel">0</span> 顆星星 ⭐
      </p>
      <div class="modal-actions">
        <button id="modalAgainBtn" class="primary-btn full-width">再來一輪</button>
        <button id="modalRestBtn" class="ghost-btn full-width">先休息一下</button>
      </div>
    </div>
  </div>

  <!-- 📘 全部日記 Modal -->
  <div id="allDiaryModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card diary-card">
      <div class="modal-header-row">
        <h3>熊麻吉的成長日記</h3>
        <button id="closeAllDiaryBtn" class="icon-btn">✕</button>
      </div>
      <div id="allDiaryList" class="diary-list all-diary-list">
        目前還沒有任何紀錄。
      </div>
    </div>
  </div>

  <!-- ⏰ 鬧鐘設定 Modal -->
  <div id="alarmModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card alarm-card">
      <div class="modal-header-row">
        <h3>鬧鐘提醒</h3>
        <button id="closeAlarmModalBtn" class="icon-btn">✕</button>
      </div>

      <div class="alarm-form">
        <div class="alarm-row">
          <label for="alarmActivity">活動：</label>
          <select id="alarmActivity">
            <option value="reading">📖 看書</option>
            <option value="sport">💪 運動</option>
            <option value="skill">🎵 練技能</option>
          </select>
        </div>

        <div class="alarm-row">
          <label for="alarmTime">時間：</label>
          <input id="alarmTime" type="time" />
        </div>

        <div class="alarm-row">
          <label for="alarmLabel">備註：</label>
          <input id="alarmLabel" type="text" placeholder="例如：睡前閱讀 / 晚上運動" />
        </div>

        <button id="addAlarmBtn" class="primary-btn small-btn">新增鬧鐘</button>
        <p class="alarm-tip">＊網頁必須開著，鬧鐘才會提醒喔。</p>
      </div>

      <div id="alarmList" class="alarm-list">
        目前還沒有鬧鐘，試著安排一個吧！
      </div>
    </div>
  </div>

  <!-- 💤 作息設定 Modal -->
  <div id="scheduleModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card settings-card">
      <div class="modal-header-row">
        <h3>作息時間設定</h3>
        <button id="closeScheduleBtn" class="icon-btn">✕</button>
      </div>

      <p class="settings-tip">
        這裡可以調整熊麻吉的固定作息，會自動提醒睡覺和吃東西。<br>
        夜間睡眠期間熊麻吉會進入睡覺模式唷。
      </p>

      <div class="schedule-row">
        <label for="sleepStartInput">晚上睡覺開始：</label>
        <input id="sleepStartInput" type="time">
      </div>

      <div class="schedule-row">
        <label for="sleepEndInput">早上起床時間：</label>
        <input id="sleepEndInput" type="time">
      </div>

      <div class="schedule-row">
        <label for="hungryMorningInput">早上肚子餓：</label>
        <input id="hungryMorningInput" type="time">
      </div>

      <div class="schedule-row">
        <label for="hungryNoonInput">中午肚子餓：</label>
        <input id="hungryNoonInput" type="time">
      </div>

      <div class="schedule-row">
        <label for="napStartInput">午睡開始：</label>
        <input id="napStartInput" type="time">
      </div>

      <div class="schedule-row">
        <label for="napDurationInput">午睡分鐘：</label>
        <input id="napDurationInput" type="number" min="10" max="120" step="5">
      </div>

      <div class="schedule-row">
        <label for="hungryEveningInput">傍晚肚子餓：</label>
        <input id="hungryEveningInput" type="time">
      </div>

      <button id="saveScheduleBtn" class="primary-btn full-width">
        儲存作息設定
      </button>
    </div>
  </div>

  <!-- 🐻 取名字 / 改名字 Modal -->
  <div id="nameModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card name-card">
      <div class="modal-header-row">
        <h3 id="nameModalTitle">幫熊熊取名字</h3>
        <button id="closeNameBtn" class="icon-btn">✕</button>
      </div>
      <p class="settings-tip">
        可以幫你的熊麻吉取一個專屬名字，之後也可以再修改。<br>
        不知道叫什麼時，可以先用預設的「熊麻吉」。
      </p>
      <div class="schedule-row">
        <label for="bearNameInput">熊熊名字：</label>
        <input id="bearNameInput" type="text" maxlength="10"
               placeholder="例如：小勇熊、暖暖熊……">
      </div>
      <button id="saveNameBtn" class="primary-btn full-width">
        確認名字
      </button>
    </div>
  </div>

  <!-- ⭐ 星星結果訊息（活動結束彈出用） -->
  <div id="starResultToast" class="toast-panel"></div>

  <!-- 🛒 商店視窗 -->
  <div id="shopModal" class="shop-modal">
    <div class="shop-window">
      <button class="shop-close-btn" type="button" onclick="closeShop()">✖</button>
      <h2>⭐ 星星商店</h2>
      <p class="shop-tip">每活動 1 分鐘 = 1 顆星星，來幫熊麻吉補充體力、佈置房間吧！</p>

      <!-- 分類分頁 -->
      <div class="tabs">
        <button type="button" class="tab-btn" onclick="switchTab('food')">🍱 主食</button>
        <button type="button" class="tab-btn" onclick="switchTab('fruits')">🍎 水果</button>
        <button type="button" class="tab-btn" onclick="switchTab('desserts')">🍰 甜點</button>
        <button type="button" class="tab-btn" onclick="switchTab('furniture')">🏠 傢俱</button>
        <button type="button" class="tab-btn" onclick="switchTab('study')">📚 學習用品</button>
        <button type="button" class="tab-btn" onclick="switchTab('fun')">🎮 娛樂用品</button>
      </div>

      <div id="shopItemsArea" class="shop-items-area">
        <!-- 由 JS 動態產生 -->
      </div>

      <div class="owned-items-box">
        <h3>熊麻吉現在擁有</h3>
        <ul id="ownedItemsList" class="owned-items-list">
          <li>還沒有買任何東西，先去逛逛商店吧！</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- 星星飛行動畫的元素由 JS 動態插入 -->

  <script src="script.js"></script>
</body>
</html>